<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>–ö–æ—Ä–∑–∏–Ω–∞ ‚Äî MobileStore</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã */
    #cartItems div {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding: 8px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .cart-item-controls button {
      margin: 0 4px;
      padding: 4px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: #f3f4f6;
      cursor: pointer;
    }
    .cart-item-controls span {
      margin: 0 6px;
      font-weight: 500;
    }
  </style>
</head>
<body>

  <!-- –®–∞–ø–∫–∞ -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">technoshop.kz</a>
      <form class="search" action="catalog.html">
        <input type="search" name="q" placeholder="–ü–æ–∏—Å–∫: iPhone, –Ω–æ—É—Ç–±—É–∫, –Ω–∞—É—à–Ω–∏–∫–∏...">
        <button type="submit">üîç</button>
      </form>
      <nav class="header-actions">
        <a href="catalog.html" class="nav-link">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="contacts.html" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        <a href="about.html" class="nav-link">–û –Ω–∞—Å</a>
        <a href="cart.html" class="cart-btn" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">
          <span class="cart-icon">üõí</span>
          <span class="cart-count" id="cartCount">0</span>
        </a>
        <a href="login.html" class="btn btn-ghost">–í–æ–π—Ç–∏</a>
      </nav>
    </div>
  </header>

  <main class="container" style="margin-top:120px;">
    <h1>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>
    <div id="cartItems"></div>
    <div id="cartTotal" style="margin-top:20px; font-weight:700;"></div>
    <button id="clearCart" class="btn btn-outline" style="margin-top:20px;">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
  </main>

  <script>
    function getCart() {
      return JSON.parse(localStorage.getItem('ms_cart') || '[]');
    }

    function setCart(cart) {
      localStorage.setItem('ms_cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }

    function updateCartCount() {
      const cart = getCart();
      const count = cart.reduce((sum, item) => sum + (item.qty || 0), 0);
      document.getElementById('cartCount').textContent = count;
    }

    function renderCart() {
      const cart = getCart();
      const container = document.getElementById('cartItems');
      container.innerHTML = '';
      if(cart.length === 0){
        container.innerHTML = '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
        document.getElementById('cartTotal').textContent = '';
        return;
      }

      let total = 0;
      cart.forEach(item => {
        total += item.price * item.qty;
        const div = document.createElement('div');

        div.innerHTML = `
          <span>${item.name}</span>
          <div class="cart-item-controls">
            <button class="decrease">-</button>
            <span>${item.qty}</span>
            <button class="increase">+</button>
            <span>‚Ç∏ ${item.price * item.qty}</span>
            <button class="remove">‚ùå</button>
          </div>
        `;

        // –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–∏—Ç—å
        div.querySelector('.remove').addEventListener('click', () => {
          const newCart = cart.filter(p => p.id !== item.id);
          setCart(newCart);
        });

        // –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        div.querySelector('.increase').addEventListener('click', () => {
          item.qty += 1;
          setCart(cart);
        });

        // –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        div.querySelector('.decrease').addEventListener('click', () => {
          if(item.qty > 1){
            item.qty -= 1;
            setCart(cart);
          }
        });

        container.appendChild(div);
      });

      document.getElementById('cartTotal').textContent = '–ò—Ç–æ–≥–æ: ‚Ç∏ ' + total;
    }

    document.getElementById('clearCart').addEventListener('click', () => {
      if(confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')){
        setCart([]);
      }
    });

    renderCart();
    updateCartCount();
  </script>
</body>
</html>
